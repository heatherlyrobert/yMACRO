#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                yMACRO.h                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include private header               yMACRO_priv.h               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
SCRP          (BASE) verify macro configuration locking system                   _init, _config, _regbeg, _exebeg, _direct, _reader, _writer                                           ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   GROUP      before global initialization                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       set up mode                                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     initialize yMODE                     yMODE_init                  MODE_MAP                                                                                              i_equal     0                                                                                                    

   COND       try to initialize out of sequence                                  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     initialize before yVIKEYS_init       yMACRO_init                                                                                                                       i_lesser    0                                                                                                    
     get      check current status                 yMODE__unit                 "status"         , SMOD_MACRO                                                                         s_equal     MODE status ( 8) : @  å5f:-- p f i ----- n ----- r 0--------- d oæ  å5---- - - - ----- n ----- - 0--------- d -æ                                      

   COND       try optional configuration before initializing                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     macro configuration                  yMACRO_config               NULL             , NULL                                                                               i_lesser    0                                                                                                    

   COND       try actions before initializing                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     macro recording                      ymacro_rec_beg              'a'                                                                                                   i_lesser    0                                                                                                    
     exec     macro recording end                  yMACRO_rec_end                                                                                                                    i_equal     0                                                                                                    
     exec     macro execution                      ymacro_exe_beg              'b'                                                                                                   i_lesser    0                                                                                                    
     exec     macro direct                         yMACRO_direct               "c=hljk"                                                                                              i_lesser    0                                                                                                    

   COND       try to read file before initialing                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     open using stdin                     yPARSE_stdin                                                                                                                      i_lesser    0                                                                                                    
     exec     clear everything                     yPARSE_purge_in                                                                                                                   i_equal     0                                                                                                    
     load     add a line to stdin                  stdin                       macro        § a § lhjk §¦                                                                                                                                                                                                 
     exec     read the record                      yPARSE_read                 NULL, NULL, NULL, NULL                                                                                i_lesser    1                                                                                                    
     exec     call reader                          yMACRO_reader               0, NULL                                                                                               i_lesser    0                                                                                                    
     exec     close stdin                          yPARSE_close_in                                                                                                                   i_lesser    0                                                                                                    

   COND       try to write file before initialing                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.006))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call the handler                     ymacro__writer              0, 'a'                                                                                                   i_lesser    0                                                                                                    
     exec     write all                            yMACRO_writer                                                                                                                     i_lesser    0                                                                                                    

   GROUP      after global initialization, before optional configuration         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the full system (including macro)                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        ymacro__unit_quiet                                                                                                                i_equal     0                                                                                                    
     exec     initialize yPARSE                    yPARSE_init                 '-', NULL, '-'                                                                                        i_equal     0                                                                                                    
     exec     set yPARSE delimiters                yPARSE_delimiters           "§"                                                                                                   i_equal     0                                                                                                    
     get      check current status                 yMODE__unit                 "status"         , SMOD_MACRO                                                                         s_equal     MODE status ( 8) : @  å5f:-- p f i ----- n ----- r 0--------- d oæ  å5f:-- p f i ----- n ----- r 0--------- d oæ                                      

   COND       try actions before optional configuration                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     macro recording                      ymacro_rec_beg              'd'                                                                                                   i_equal     0                                                                                                    
     exec     macro recording end                  yMACRO_rec_end                                                                                                                    i_equal     0                                                                                                    
     exec     macro execution                      ymacro_exe_beg              'e'                                                                                                   i_equal     0                                                                                                    
     exec     macro direct                         yMACRO_direct               "a=hljk"                                                                                              i_equal     0                                                                                                    

   COND       try to read file before optional configuration                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     open using stdin                     yPARSE_stdin                                                                                                                      i_equal     0                                                                                                    
     exec     clear everything                     yPARSE_purge_in                                                                                                                   i_equal     0                                                                                                    
     load     add a line to stdin                  stdin                       macro        § a § lhjk §¦                                                                                                                                                                                                 
     exec     read the record                      yPARSE_read                 NULL, NULL, NULL, NULL                                                                                i_equal     3                                                                                                    
     exec     call reader                          yMACRO_reader               0, NULL                                                                                               i_equal     1                                                                                                    
     exec     close stdin                          yPARSE_close_in                                                                                                                   i_equal     0                                                                                                    

   COND       try to write file before optional configuration                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.010))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call the handler                     ymacro__writer              0, 'a'                                                                                                i_equal     1                                                                                                    
     exec     write all                            yMACRO_writer                                                                                                                     i_equal     1                                                                                                    

   GROUP      after global initialization and optional configuration             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       optional configuration                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.011))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     macro configuration                  yMACRO_config               NULL             , NULL                                                                               i_equal     0                                                                                                    
     get      check current status                 yMODE__unit                 "status"         , SMOD_MACRO                                                                         s_equal     MODE status ( 8) : @  å5f:-- p f i ----- n ----- r 0--------- d oæ  å5f:-- p f i ----- n ----- r 0--------- d oæ                                      

   COND       try actions after configuration                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.012))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     macro recording                      ymacro_rec_beg              'g'                                                                                                   i_equal     0                                                                                                    
     exec     macro recording end                  yMACRO_rec_end                                                                                                                    i_equal     0                                                                                                    
     exec     macro execution                      ymacro_exe_beg              'h'                                                                                                   i_equal     0                                                                                                    
     exec     macro direct                         yMACRO_direct               "a=hljk"                                                                                              i_equal     0                                                                                                    

   COND       try to read file after configuration                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.013))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     open using stdin                     yPARSE_stdin                                                                                                                      i_equal     0                                                                                                    
     exec     clear everything                     yPARSE_purge_in                                                                                                                   i_equal     0                                                                                                    
     load     add a line to stdin                  stdin                       macro        § a § lhjk §¦                                                                                                                                                                                                 
     exec     read the record                      yPARSE_read                 NULL, NULL, NULL, NULL                                                                                i_equal     3                                                                                                    
     exec     call reader                          yMACRO_reader                0, NULL                                                                                              i_equal     1                                                                                                    
     exec     close stdin                          yPARSE_close_in                                                                                                                   i_equal     0                                                                                                    

   COND       try to write file after configuration                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.014))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call the handler                     ymacro__writer              0, 'a'                                                                                                   i_equal     1                                                                                                    
     exec     write all                            yMACRO_writer                                                                                                                     i_equal     1                                                                                                    

   GROUP      complete                                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.015))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         ymacro__unit_end                                                                                                                    i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
SCRP          (BASE) verify macro validation functions                           ymacro_index                                                                                          ((02.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        ymacro__unit_quiet                                                                                                                   i_equal     0                                                                                                    

   COND       return index for abbreviation                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     check an index (BAD)                 ymacro_index                '-'                                                                                                   i_lesser    0                                                                                                    
     exec     check an index                       ymacro_index                'a'                                                                                                   i_equal     0                                                                                                    
     exec     check an index                       ymacro_index                'b'                                                                                                   i_equal     1                                                                                                    
     exec     check an index                       ymacro_index                'f'                                                                                                   i_equal     5                                                                                                    
     exec     check an index                       ymacro_index                'z'                                                                                                   i_equal     25                                                                                                   
     exec     check an index (BAD)                 ymacro_index                'D'                                                                                                   i_lesser    0                                                                                                    
     exec     check an index (BAD)                 ymacro_index                '@'                                                                                                   i_lesser    0                                                                                                    
     exec     check an index                       ymacro_index                '5'                                                                                                   i_equal     31                                                                                                   
     exec     check an index                       ymacro_index                'ê'                                                                                                   i_equal     38                                                                                                   
     exec     check an index (BAD)                 ymacro_index                ' '                                                                                                   i_lesser    0                                                                                                    
     exec     check an index (BAD)                 ymacro_index                NULL                                                                                                  i_lesser    0                                                                                                    
     exec     check an index                       ymacro_index                '.'                                                                                                   i_equal     60                                                                                                   

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         ymacro__unit_end                                                                                                                  i_equal     0                                                                                                    



